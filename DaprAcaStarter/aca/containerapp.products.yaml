name: products-service
location: eastus
type: Microsoft.App/containerApps
properties:
  managedEnvironmentId: /subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.App/managedEnvironments/<ACA_ENV_NAME>
  configuration:
    ingress:
      external: false
      targetPort: 8080
      transport: auto
    dapr:
      enabled: true
      appId: products-service
      appPort: 8080
      appProtocol: http
      enableApiLogging: true
  template:
    containers:
    - name: products-service
      image: <ACR_LOGIN_SERVER>/products-service:latest
      resources:
        cpu: 0.25
        memory: 0.5Gi
      env:
      - name: ASPNETCORE_ENVIRONMENT
        value: Production
    scale:
      minReplicas: 1
      maxReplicas: 2
